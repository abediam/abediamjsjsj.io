<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø¨Ø§Ø²ÛŒ Ø¯Ø§Øº - Ù†Ø³Ø®Ù‡ Ù…Ù‡Ù†Ø¯Ø³ÛŒ!</title>
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">
    
    <style>
        :root {
            --primary: #ff0055;
            --bg: #0a0a0c;
            --gold: #f9bc60;
            --text: #abd1c6;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Vazirmatn', sans-serif; }

        body {
            background: var(--bg);
            background: radial-gradient(circle, #1a1a1d 0%, #0a0a0c 100%);
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text);
            overflow: hidden;
            touch-action: none;
        }

        .header { margin-top: 15px; text-align: center; }
        .score-container {
            display: flex; gap: 10px; margin: 15px 0; width: 92vw; max-width: 400px;
        }
        .player-card {
            flex: 1; background: rgba(255, 255, 255, 0.03);
            padding: 10px; border-radius: 15px; text-align: center;
            border: 1px solid rgba(255,255,255,0.1); transition: 0.3s;
        }
        .player-card.active { border-color: var(--primary); background: rgba(255, 0, 85, 0.15); box-shadow: 0 0 15px rgba(255, 0, 85, 0.2); }
        .score-num { display: block; font-size: 1.6rem; font-weight: 900; color: var(--primary); }

        .wheel-box {
            position: relative; width: 85vw; height: 85vw;
            max-width: 360px; max-height: 360px; margin: 15px 0;
        }
        .wheel {
            width: 100%; height: 100%; border-radius: 50%;
            border: 6px solid #222; position: relative;
            transition: transform 4s cubic-bezier(0.1, 0, 0.1, 1);
            background: #111; overflow: hidden;
        }
        .arrow {
            position: absolute; top: -10px; left: 50%; transform: translateX(-50%);
            width: 0; height: 0; border-left: 15px solid transparent;
            border-right: 15px solid transparent; border-top: 30px solid var(--primary);
            z-index: 100;
        }
        .spin-btn {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 60px; height: 60px; background: #fff; color: #000;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-weight: 900; z-index: 110; cursor: pointer; border: 3px solid var(--bg);
        }

        .seg {
            position: absolute; width: 50%; height: 1px;
            top: 50%; left: 50%; transform-origin: left center;
        }
        .seg-txt {
            position: absolute; left: 35px; font-size: 7px;
            font-weight: bold; white-space: nowrap; color: #777;
        }

        .popup {
            position: fixed; inset: 0; background: rgba(0,0,0,0.96);
            display: none; justify-content: center; align-items: center;
            z-index: 1000; padding: 20px;
        }
        .popup-content {
            background: #fff; color: #000; width: 100%;
            max-width: 320px; padding: 30px; border-radius: 25px; text-align: center;
        }
        .timer-circle { font-size: 3rem; font-weight: 900; color: var(--primary); margin: 10px 0; }
        .action-btn {
            padding: 16px; width: 100%; border: none; border-radius: 12px;
            margin-top: 10px; font-weight: 900; font-size: 1rem;
        }
        .btn-done { background: #00ebc7; color: #000; }
        .btn-skip { background: #eee; color: #888; }
    </style>
</head>
<body>

    <div class="header">
        <h2 style="color: var(--gold)">ğŸ“ Ø¨Ø§Ø²ÛŒ Ø¯Ø§Øº Ù…Ù‡Ù†Ø¯Ø³ÛŒ</h2>
    </div>

    <div class="score-container">
        <div id="p0-card" class="player-card">
            <span>Ø¢Ù‚Ø§ ğŸ§”</span>
            <span class="score-num" id="p0-score">0</span>
        </div>
        <div id="p1-card" class="player-card">
            <span>Ø®Ø§Ù†Ù… ğŸ‘©</span>
            <span class="score-num" id="p1-score">0</span>
        </div>
    </div>

    <div class="wheel-box">
        <div class="arrow"></div>
        <div id="wheel" class="wheel"></div>
        <div class="spin-btn" onclick="spin()">Ø¨Ú†Ø±Ø®</div>
    </div>

    <div class="popup" id="popup">
        <div class="popup-content">
            <p id="who-does" style="font-weight: bold; color: var(--primary);"></p>
            <h2 id="what-to-do" style="margin: 15px 0; font-size: 1.4rem;"></h2>
            <div class="timer-circle" id="timer">60</div>
            <button class="action-btn btn-done" onclick="endTask(true)">Ø§ÙˆÚ©ÛŒØŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯ ğŸ”¥</button>
            <button class="action-btn btn-skip" onclick="endTask(false)">Ø¨ÛŒâ€ŒØ®ÛŒØ§Ù„ / Ø±Ø¯ Ú©Ø±Ø¯Ù† â­ï¸</button>
        </div>
    </div>

    <script>
        const tasks = [
            "Ø®ÙˆØ±Ø¯Ù† ØªÙˆØª ÙØ±Ù†Ú¯ÛŒ Ø§Ø² Ø±ÙˆÛŒ Ø¨Ø¯Ù† Ø·Ø±Ù ğŸ“", 
            "Ø®ÙˆØ±Ø¯Ù† Ù…Ù‡Ù†Ø¯Ø³ (Ø¨Ù‡ Ø±ÙˆØ´ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø®ÙˆØ¯Ù…ÙˆÙ†ÛŒ!) ğŸ‘·â€â™‚ï¸ğŸ˜‹",
            "Ø®ÙˆØ±Ø¯Ù† Ù„Ø¨â€ŒÙ‡Ø§ (Û± Ø¯Ù‚ÛŒÙ‚Ù‡) ğŸ‘„", "Ù…Ø§Ø³Ø§Ú˜ Ú©Ù…Ø± Ø¨Ø§ Ø±ÙˆØºÙ† ğŸ’†", 
            "Ø¨ÙˆØ³ÛŒØ¯Ù† Ù„Ø§Ù„Ù‡ Ú¯ÙˆØ´ ğŸ‘‚", "Û³ ØªØ§ Ø§Ø³Ù¾Ù†Ú© Ù…Ø­Ú©Ù… ğŸ‘‹", 
            "Ø®ÙˆØ±Ø¯Ù† Ùˆ Ù…Ú©ÛŒØ¯Ù† Ú¯Ø±Ø¯Ù† ğŸ”¥", "Ø¨ÙˆØ³ÛŒØ¯Ù† ØªÙ…Ø§Ù… Ø§Ù†Ú¯Ø´ØªØ§ÛŒ Ø¯Ø³Øª ğŸ–ï¸",
            "Ø¯Ø±Ø¢ÙˆØ±Ø¯Ù† ÛŒÚ©ÛŒ Ø§Ø² Ù„Ø¨Ø§Ø³â€ŒÙ‡Ø§ ğŸ‘™", "Ù„ÛŒØ³ÛŒØ¯Ù† Ùˆ Ø¨ÙˆØ³ÛŒØ¯Ù† Ù†Ø§Ù ğŸŒ€",
            "Ú¯Ø§Ø² Ú¯Ø±ÙØªÙ† Ù…Ù„Ø§ÛŒÙ… Ø´ÙˆÙ†Ù‡ ğŸ§›", "Ù…Ø§Ø³Ø§Ú˜ Ø¯Ø§Ø¯Ù† Ù¾Ø§Ù‡Ø§ ğŸ¦¶",
            "Ø®ÙˆØ±Ø¯Ù† Ø²Ø¨ÙˆÙ† Ù‡Ù…Ø¯ÛŒÚ¯Ù‡ ğŸ‘…", "Ù†ÙˆØ§Ø²Ø´ Ø±Ø§Ù†â€ŒÙ‡Ø§ ğŸ¦µ",
            "Ø¨ÙˆØ³ÛŒØ¯Ù† Ø³ÛŒÙ†Ù‡ Ø§Ø² Ø±ÙˆÛŒ Ù„Ø¨Ø§Ø³ ğŸ’", "Ú©Ø¨ÙˆØ¯ Ú©Ø±Ø¯Ù† ÛŒÙ‡ Ù†Ù‚Ø·Ù‡ ğŸŸ£",
            "Ø±Ù‚ØµÛŒØ¯Ù† Ø¯ÙˆÙ†ÙØ±Ù‡ Ø®ÛŒÙ„ÛŒ Ù†Ø²Ø¯ÛŒÚ© ğŸ’ƒ", "Ø¨ÙˆØ³ÛŒØ¯Ù† Ø²ÛŒØ± Ø¨ØºÙ„! ğŸ˜¬",
            "Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¨ØºÙ„ Ú©Ø±Ø¯Ù† Ø³ÙØª ğŸ«‚", "Ø¨ÙˆØ³ÛŒØ¯Ù† Ú†Ø´Ù…â€ŒÙ‡Ø§ ğŸ‘€",
            "Ù„ÛŒØ³ÛŒØ¯Ù† Ù„Ø¨Ù‡â€ŒÙ‡Ø§ÛŒ Ú¯ÙˆØ´ ğŸ‘‚", "Ú¯ÙØªÙ† ÛŒÚ©ÛŒ Ø§Ø² ÙØ§Ù†ØªØ²ÛŒØ§Øª ğŸ’",
            "Ø®ÙˆØ±Ø¯Ù† Ø³ÛŒÙ†Ù‡ (Û± Ø¯Ù‚ÛŒÙ‚Ù‡) ğŸ“", "Ø¨ÙˆØ³ÛŒØ¯Ù† Ú¯ÙˆØ¯ÛŒ Ú©Ù…Ø± ğŸ¹",
            "Ø¨Ø±Ø¯Ø§Ø´ØªÙ† Ù„Ø¨Ø§Ø³ Ø²ÛŒØ±! ğŸ”", "Ù„ÛŒØ³ÛŒØ¯Ù† Ú¯Ø±Ø¯Ù† ØªØ§ Ù¾Ø§ÛŒÛŒÙ† ğŸŒŠ",
            "Ù¾ÙˆØ²ÛŒØ´Ù† Ø¯Ù„Ø®ÙˆØ§Ù‡ Ø®ÙˆØ¯Øª ğŸ˜ˆ", "Ø¨ÙˆØ³ÛŒØ¯Ù† Ø²Ø§Ù†ÙˆÙ‡Ø§ ğŸ¦µ",
            "Ø®ÙˆØ±Ø¯Ù† Ø§Ù†Ú¯Ø´ØªØ§ÛŒ Ù¾Ø§ ğŸ¦¶", "Ù…Ø§Ø³Ø§Ú˜ Ø¨Ø§Ø³Ù† Ø¨Ø§ Ø¯Ø³Øª ğŸ‘‹",
            "ÛŒÙ‡ Ú¯Ø§Ø² Ù…Ø­Ú©Ù… Ø§Ø² Ù„Ù¾ ğŸ¦·", "Ù„ÛŒØ³ÛŒØ¯Ù† Ø¨Ø§Ø²ÙˆÙ‡Ø§ ğŸ‘…",
            "Û±Û° Ø¨Ø§Ø± Ø¨ÙˆØ³ÛŒØ¯Ù† Ø³Ø±ÛŒØ¹ ğŸ’‹", "Ø¨ÙˆØ³Ù‡ ÙØ±Ø§Ù†Ø³ÙˆÛŒ Ø¯Ø§Øº ğŸ’¦",
            "Ø¨ÙˆØ³ÛŒØ¯Ù† Ø´Ú©Ù… Ùˆ Ù¾Ù‡Ù„ÙˆÙ‡Ø§ ğŸ¤°", "Ø¯Ø±Ø¢ÙˆØ±Ø¯Ù† Ø¬ÙˆØ±Ø§Ø¨ Ø¨Ø§ Ø¯ÙˆÙ†Ø¯ÙˆÙ† ğŸ¦·",
            "Ù…Ø§Ø³Ø§Ú˜ Ø³Ø± ğŸ’†â€â™‚ï¸", "Ù¾ÙˆÚ†! ğŸ³ï¸", "Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¨Ú†Ø±Ø® ğŸ”„",
            "Ø·Ø±Ù Ù…Ù‚Ø§Ø¨Ù„Øª ÛŒÙ‡ Ø¯Ø³ØªÙˆØ± Ø¨Ø¯Ù‡ ğŸ—£ï¸", "Ø¨ÙˆØ³ÛŒØ¯Ù† Ú©Ù Ø¯Ø³Øªâ€ŒÙ‡Ø§ âœ‹", 
            "Ø®ÙˆØ±Ø¯Ù† Ù„Ø¨ Ù¾Ø§ÛŒÛŒÙ† (Û³Û° Ø«Ø§Ù†ÛŒÙ‡) ğŸ‘„"
        ];

        let scores = [0, 0];
        let turn = 0;
        let lastIdx = -1;
        let rotation = 0;
        let timerClock;

        function initWheel() {
            const wheel = document.getElementById('wheel');
            const step = 360 / tasks.length;
            tasks.forEach((t, i) => {
                const d = document.createElement('div');
                d.className = 'seg';
                d.style.transform = `rotate(${i * step}deg)`;
                d.innerHTML = `<span class="seg-txt">${t}</span>`;
                wheel.appendChild(d);
            });
            refreshUI();
        }

        function refreshUI() {
            document.getElementById('p0-score').innerText = scores[0];
            document.getElementById('p1-score').innerText = scores[1];
            document.getElementById('p0-card').className = turn === 0 ? 'player-card active' : 'player-card';
            document.getElementById('p1-card').className = turn === 1 ? 'player-card active' : 'player-card';
        }

        function spin() {
            const step = 360 / tasks.length;
            let newIdx;
            do { newIdx = Math.floor(Math.random() * tasks.length); } while (newIdx === lastIdx);
            lastIdx = newIdx;

            const extra = 1800 + (Math.random() * 360);
            const target = (tasks.length - newIdx) * step;
            rotation += extra + (target - (rotation % 360));
            document.getElementById('wheel').style.transform = `rotate(${rotation}deg)`;

            setTimeout(() => { showResult(tasks[newIdx]); }, 4100);
        }

        function showResult(task) {
            const pop = document.getElementById('popup');
            document.getElementById('who-does').innerText = "Ù†ÙˆØ¨Øª: " + (turn === 0 ? "Ø¢Ù‚Ø§ ğŸ§”" : "Ø®Ø§Ù†Ù… ğŸ‘©");
            document.getElementById('what-to-do').innerText = task;
            pop.style.display = 'flex';

            let s = 60;
            const tEl = document.getElementById('timer');
            tEl.innerText = s;
            clearInterval(timerClock);
            timerClock = setInterval(() => {
                s--; tEl.innerText = s;
                if(s <= 0) clearInterval(timerClock);
            }, 1000);
        }

        function endTask(win) {
            clearInterval(timerClock);
            if(win) scores[turn]++;
            document.getElementById('popup').style.display = 'none';
            if(!document.getElementById('what-to-do').innerText.includes("Ø¯ÙˆØ¨Ø§Ø±Ù‡")) {
                turn = turn === 0 ? 1 : 0;
            }
            refreshUI();
        }

        initWheel();
    </script>
</body>
</html>